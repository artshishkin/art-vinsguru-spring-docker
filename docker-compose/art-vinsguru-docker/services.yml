version: "3.8"
services:
  job-service:
    profiles:
      - app
    build:
      context: ../../job-service
      dockerfile: Dockerfile
    image: ${GROUP_ID:-artarkatesoft}/art-vinsguru-job-service:${SERVICE_VERSION:-latest}
    environment:
      "spring.data.mongodb.host": mongo
    ports:
      - "8090:8090"
    depends_on:
      - mongo
    networks:
      - ${GLOBAL_NETWORK:-services}

  job-service-multistage:
    profiles:
      - multistage-build
    build:
      context: ../../
      dockerfile: job-service/Dockerfile-multistage
    image: ${GROUP_ID:-artarkatesoft}/art-vinsguru-job-service:multistage
    environment:
      "spring.data.mongodb.host": mongo
    ports:
      - "8090:8090"
    depends_on:
      - mongo
    networks:
      - ${GLOBAL_NETWORK:-services}

  candidate-service:
    profiles:
      - app
    build:
      context: ../../candidate-service
      dockerfile: Dockerfile
    image: ${GROUP_ID:-artarkatesoft}/art-vinsguru-candidate-service:${SERVICE_VERSION:-latest}
    environment:
      "spring.data.mongodb.host": mongo
      "app.job-service.base-url": http://job-service:8090
    ports:
      - "8091:8080"
    depends_on:
      - mongo
      - job-service
    networks:
      - ${GLOBAL_NETWORK:-services}

